# Supplementary Reproducibility Instructions (Stage IV HVT‑A)

## 1) Scope of Reproducibility

### What can be reproduced
Using the released hash‑only dataset and disclosed scripts, a reproducer can deterministically regenerate:
- The **analysis‑ready dataset** used for statistical analyses (CSV outputs in `__EXTRACT_OUT__/`)
- The **QC/verification certificates** confirming dataset completeness and internal consistency (JSON/NDJSON outputs in `__VERIFY_READY__/`)
- All **statistical tables and figures** generated by `RUN_ALL_HVT_A_FINAL.R` from the analysis‑ready dataset (written to `<OUT_DIR>/run_<UTC>/`)

### What cannot be reproduced (explicit)
- **Manuscript Table 4** 
Table 4 reports node-local file counts and storage sizes that require direct access to execution environments (Nodes 01–03) and are therefore not reproducible from hash-only exports. All other tables and figures are reproducible from the released dataset.

---

## 2) Required Materials

### Hash‑only verification artefacts and analysis dataset:


### Deterministic Extraction scripts (Python):


### Statistical Analyses scripts (R):


### Software environment
- Python 3 (for optional regeneration of the analysis dataset)
- R (version and OS details as disclosed in the main manuscript)

---

## 3) Execution Overview

Two supported reproduction modes are provided:

**Mode A (recommended; fastest):**  
Download the release, confirm `__EXTRACT_OUT__/` and `__VERIFY_READY__/` are present, then run the R entrypoint to reproduce tables/figures.

**Mode B (full regeneration):**  
Run Python extractors/verifiers to regenerate `__EXTRACT_OUT__/` and `__VERIFY_READY__/` from released hash‑only packets, then run the R entrypoint.

---

## 4) Step‑by‑Step Instructions

### 4.1 Directory layout (required)
Define:
- `<REPRO_ROOT>` = the directory containing the release (repository root)
- `<DATA_ROOT>`  = `<REPRO_ROOT>/EXEC_HVT_A_FINAL`

Required structure:
```
<REPRO_ROOT>/
EXEC_HVT_A_FINAL/
EXTRACT_OUT/
VERIFY_READY/
Node02_HVT_A_COMPLETED/
Node03_HVT_A_COMPLETED/

R_00_config.R
R_01_load_hvtA.R
R_02_qc_hvtA.R
R_03_operator_rollup_hvtA.R
R_04_models_hvtA_complexity.R
R_04a_table4_1_temporal_parameters.R
R_04b_table4_2_complexity_models.R
R_05_table2_primary_outcomes_v2.R
R_05_table5_cross_operator_reproducibility.R
R_05_tables_hvtA.R
R_05c_table_item_level_enumeration_performance.R
R_05d_tableS_hvt_by_operator.R
R_05f_tableS_candidate_level_hvt_by_operator.R
R_06_plots_hvtA.R
R_06a_fig1_stats_table.R
R_06b_figS_hvt_by_operator_boxplot.R
RUN_ALL_HVT_A_FINAL.R
```
**Path configuration rule (R):** All user‑editable paths are confined to the “USER CONFIG” block in `R_00_config.R` (input CSV location and output directory).

---

### 4.2 Mode A — Run statistical analyses using released analysis tables (recommended)

**Inputs required (already provided in the release):**
- `<DATA_ROOT>/__EXTRACT_OUT__/hvtA_comparisons__WITH_BLINDING.csv`
- `<DATA_ROOT>/__VERIFY_READY__/hvtA_analysis_ready_summary.json` (errors must be 0)
- `<DATA_ROOT>/__VERIFY_READY__/hvtA_with_blinding_verify_summary.json` (errors must be 0)

**Run (command line):**
```bash
cd "<REPRO_ROOT>"
Rscript RUN_ALL_HVT_A_FINAL.R
```

Run (interactive R):
```bash
setwd("<REPRO_ROOT>")
rm(list = ls()); gc()
source("RUN_ALL_HVT_A_FINAL.R")
```

---

## 4.3 Mode B — Regenerate the analysis tables from hash‑only packets (full reproduction)

All Python scripts are fail‑closed by default (strict mode). Do not use --non-strict for reproduction.

### Step 1 — Extract HVT‑A metadata to R‑ready tables
```bash
python3 qms_extract_hvtA_metadata_v5_3_1___20260119T201923Z.py \
  --root "<DATA_ROOT>"
```

### Step 2 — Verify “analysis readiness” (unblinded extraction)
```bash
python3 qms_verify_hvtA_analysis_ready_v5_0___20260119T201923Z.py \
  --root "<DATA_ROOT>"
```

### Step 3 — Merge blinding maps into the comparisons table 
This step requires the three released blinding‑map markdown files (paths below are placeholders):
- <STAGE_IIIA_BLINDING_MAP_MD> 
- <STAGE_IV_BLINDING_MAP_MD> 
- <NODE03_PC_OVERRIDE_MD> 
```bash
python3 qms_blinding_map_to_csv_and_merge_v5_1___20260119T201923Z.py \
  --stage-iiia-map "<DATA_ROOT>/<STAGE_IIIA_BLINDING_MAP_MD>" \
  --stage-iv-map "<DATA_ROOT>/<STAGE_IV_BLINDING_MAP_MD>" \
  --node03-pc-override "<DATA_ROOT>/<NODE03_PC_OVERRIDE_MD>" \
  --comparisons-csv "<DATA_ROOT>/__EXTRACT_OUT__/hvtA_comparisons.csv" \
  --out-dir "<DATA_ROOT>/__EXTRACT_OUT__"
```

### Step 4 — Verify “analysis readiness” (WITH_BLINDING)
```bash
python3 qms_verify_hvtA_with_blinding_ready_v5_0___20260119T201923Z.py \
  --csv "<DATA_ROOT>/__EXTRACT_OUT__/hvtA_comparisons__WITH_BLINDING.csv" \
  --out-dir "<DATA_ROOT>/__VERIFY_READY__"
```

### Step 5 — Run the R analysis entrypoint
Run as in Mode A.

---

## Data and Code Key

### Hash-only verification artefacts and analysis dataset

EXEC_HVT_A_FINAL/
    Node02_HVT_A_COMPLETED/
    Node03_HVT_A_COMPLETED/

### Blind keys

- `BLINDING_MAP_QMSv5_StageIIIA_PREHVT___20251222T010004Z.md`
- `BLINDING_MAP_QMSv5_StageIV_PREHVT___20251222T010004Z.md` 
- `PC_Node03_BLINDING_MAP_QMSv5_StageIV_PREHVT___20260116T072544Z.md`

### `__EXTRACT_OUT__/` and `__VERIFY_READY__/` outputs from python extractors

__EXTRACT_OUT__/
    hvtA_comparisons.csv
    hvtA_artifacts.csv
    hvtA_extract_log.ndjson
    blinding_map_parsed.csv
    hvtA_comparisons__WITH_BLINDING.csv

__VERIFY_READY__/
    hvtA_analysis_ready_summary.json
    hvtA_analysis_ready_log.ndjson
    hvtA_with_blinding_verify_summary.json
    hvtA_with_blinding_verify_log.ndjson

### Deterministic extraction scripts (Python)

- `qms_blinding_map_to_csv_and_merge_v5_1___20260119T201923Z.py` 
- `qms_extract_hvtA_metadata_v5_3_1___20260119T201923Z.py` 
- `qms_verify_hvtA_analysis_ready_v5_0___20260119T201923Z.py` 
- `qms_verify_hvtA_with_blinding_ready_v5_0___20260119T201923Z.py`

### Statistical analysis scripts (R)

- `R_00_config.R` 
- `R_01_load_hvtA.R` 
- `R_02_qc_hvtA.R` 
- `R_03_operator_rollup_hvtA.R` 
- `R_04_models_hvtA_complexity.R` 
- `R_04a_table4_1_temporal_parameters.R` 
- `R_04b_table4_2_complexity_models.R` 
- `R_05_table2_primary_outcomes_v2.R` 
- `R_05_table5_cross_operator_reproducibility.R` 
- `R_05_tables_hvtA.R` 
- `R_05c_table_item_level_enumeration_performance.R` 
- `R_05d_tableS_hvt_by_operator.R` 
- `R_05f_tableS_candidate_level_hvt_by_operator.R` 
- `R_06_plots_hvtA.R` 
- `R_06a_fig1_stats_table.R` 
- `R_06b_figS_hvt_by_operator_boxplot.R` 
- `RUN_ALL_HVT_A_FINAL.R`

### R Statistical analysis outputs

derived/
    hvtA_arm_level.csv 
    hvtA_operator_summary.csv 
    hvtA_primary_rows.csv
plots/
    Fig1_family_PASS_vs_FAIL.pdf 
    Fig2_duration_vs_n.pdf 
    Fig2b_duration_vs_n_by_stage.pdf 
    Fig3_duration_vs_k_fail.pdf 
    Fig3b_duration_vs_k_fail_by_stage.pdf 
    FigS_CandHVT_by_operator_boxplot.pdf 
    FigS_HVT_by_operator_boxplot.pdf
qc/
    run_manifest.json
tables/
    Architect_context_nonprimary.csv 
    Fig_model_labels.csv 
    Fig1_failonly_stage_comparison.csv 
    Fig1_kw_passlike_by_family.csv 
    Fig1_kw_stageIV_faillike_by_family.csv 
    Fig1_stats_by_family.csv 
    Table2_candidate_outcomes.csv 
    Table2_metrics_EVIDENCE_and_MEMBERSHIP.csv 
    Table2A_STAGEIIIA_EVIDENCE_branch.csv 
    Table2A_STAGEIV_EVIDENCE_branch.csv 
    Table2B_STAGEIIIA_MEMBERSHIP_branch.csv 
    Table2B_STAGEIV_MEMBERSHIP_branch.csv 
    Table3a_detection_performance.csv 
    Table3b_file_level_totals.csv 
    Table4_1_temporal_parameters.csv 
    Table4_2_complexity_models_summary.csv 
    Table4_agreement_summary.csv 
    Table4_kappa_by_node.csv 
    Table4_per_arm_agreement.csv 
    Table5_cross_operator_disagreements.csv 
    Table5_cross_operator_reproducibility.csv 
    Table5_timing_by_family.csv 
    Table5_timing_by_operator.csv 
    Table6_tamper_class.csv 
    Table7_commit_reveal_integrity.csv 
    Table8_corpus_characteristics.csv 
    TableS_CandHVT_by_operator_all.csv 
    TableS_CandHVT_by_operator_faillike.csv 
    TableS_CandHVT_by_operator_passlike.csv 
    TableS_CandHVT_by_operator_tests.csv 
    TableS_HVT_by_operator_all.csv 
    TableS_HVT_by_operator_faillike.csv 
    TableS_HVT_by_operator_passlike.csv 
    TableS_HVT_by_operator_tests.csv 
    TableS_item_level_enumeration_branch_details.csv 
    TableS_item_level_enumeration_performance.csv

---